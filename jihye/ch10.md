# **Chapter 10 프로세스와 스레드**

## 10-1 프로세스 개요

- 프로세스란?
    - 실행 중인 프로그램
    - 프로그램은 실행되기 전까지는 보조기억장치에 있는 데이터 덩어리일 뿐이지만, 보조기억장치에 저장된 프로그램을 메모리에 적재하고 실행하는 순간 그 프로그램은 프로세스가 된다. → 프로세스를 생성하는 과정

### 프로세스 직접 확인하기

- 포그라운드 프로세스: 사용자가 보는 앞에서 실행되는 프로세스
- 백그라운드 프로세스: 사용자가 보지 못하는 뒤에서 실행되는 프로세스
    - 사용자와 직접 상호작용할 수 있는 백그라운드 프로세스
    - **사용자와 상호작용하지 않고 정해진 일만 수행하는 백그라운드 프로세스**
        - 유닉스 체계의 운영체제에서는 이를 데몬이라고 부른다.
        - 윈도우 운영체제에서는 서비스라고 부른다.

### 프로세스 제어 블록

- 운영체제는 빠르게 번갈아 수행되는 프로세스의 실행 순서를 관리하고, 프로세스에 CPU를 비롯한 자원을 배분한다. 이를 위해 운영체제는 프로세스 제어 블록(PCB, process control block) 을 이용한다.
- 프로세스 제어 블록은 프로세스와 관련된 정보를 저장하는 자료구조이다.
- 커널 영역에 생성된다.
- PCB로 특정 프로세스를 식별하고 해당 프로세스를 처리하는 데 필요한 정보를 판단한다.
- 프로세스 생성 시에 만들어지고, 실행이 끝나면 폐기된다.
- PCB에 담기는 정보
    - 프로세스 ID(PID)
    - 레지스터 값
    - 프로세스 상태
    - CPU 스케줄링 정보
    - 메모리 관리 정보
    - 사용한 파일과 입출력 장치 목록

### 문맥 교환

- 하나의 프로세스 수행을 재개하기 위해 기억해야 할 정보를 문맥이라고 한다. → 중간 정보
- 기존 프로세스의 문맥을 PCB에 백업하고, 새로운 프로세스를 실행하기 위해 문맥을 PCB로부터 복구하여 새로운 프로세스를 실행하는 것을 문맥 교환이라고 한다.

### 프로세스의 메모리 영역

- 하나의 프로세스는 사용자 영역에 크게 코드 영역, 데이터 영역, 힙 영역, 스택 영역으로 나뉘어 저장된다.
- 정적 할당 영역: 크기 고정
    - 코드, 데이터 영역
- 동적 할당 영역
    - 힙, 스택 영역

## 10-2 프로세스 상태와 계층 구조

### 프로세스 상태

프로세스가 가질 수 있는 대표적인 상태

- 생성 상태
- 준비 상태
- 실행 상태
- 대기 상태
- 종료 상태

### 프로세스 계층 구조

- 프로세스는 실행 도중 시스템 호출을 통해 다른 프로세스를 생성할 수 있다.
- 이 때 새 프로세스를 생성한 프로세스를 부모 프로세스,
- 부모 프로세스에 의해 생성된 프로세스를 자식 프로세스라고 한다.

### 프로세스 생성 기법

- 부모 프로세스를 통해 생성된 자식 프로세스들은 복제와 옷 갈아입기를 통해 실행된다. 정확하게 말하면 부모 프로세스는 fork 를 통해 자신의 복사본을 자식 프로세스로 생성해내고, 만들어진 복사본(자식 프로세스)은 exec를 통해 자신의 메모리 공간을 다른 프로그램으로 교체한다.
    - fork와 exec는 시스템 호출이다.

## 10-3 스레드

- 스레드는 실행 단위다.
- 더 정확하게는, 프로세스를 구성하는 실행의 흐름 단위
- 하나의 프로세스는 여러 개의 스레드를 가질 수 있다.

### 프로세스와 스레드

- 프로세스와 스레드들은 실행에 필요한 최소한의 정보(프로그램 카운터를 포함한 레지스터, 스택)만을 유지한 채 프로세스 자원을 공유하며 실행된다.
    - 프로세스와 자원을 공유한다는 것이 스레드의 핵심이다.
- 프로세스가 실행되는 프로그램이라면 스레드는 프로세스를 구성하는 실행의 흐름 단위이다.

### 멀티프로세스와 멀티스레드

- 멀티프로세스
    - 여러 프로세스를 동시에 실행하는 것
- 멀티 스레드
    - 여러 스레드로 프로세스를 동시에 실행하는 것
---
### 논의 내용
- 프로세스와 스레드의 차이에 대해서 이야기 해보면 좋겠습니다. 