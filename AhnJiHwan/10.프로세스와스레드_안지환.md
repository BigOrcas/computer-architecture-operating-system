# 10-1 프로세스 개요

실행중인 프로그램을 프로세스라고 합니다.
프로세스는 저장된 프로그램을 메모리에 적재하고 실횅하는 순간 그 프로그램은 프로세스가 됩니다.

## 프로세스 제어 블록

프로세스제어블록(`PCB`)은 프로세스와 관련된 정보를 저장하는 자료 구조입니다.

프로세스 제어 블록에는 해당 프로세스를 식별하기 위해 필요한 정보를 저장합니다.

**프로세스 ID**
프로세스 ID는 특정 프로세스를 식별하기 위해 부여하는 고유한 번호입니다.

**레지스터 값**
PCB 안에 해당 프로세스가 실행하며 사용했던 프로그램 카운터를 비롯한 레지스터 값들이 담깁니다.

## 문맥 교환
하나의 프로세스가 끝나면 다른 프로세스로 실행 순서를 넘기는 것은 문맥 교환이라고 합니다.

기존 프로세스의 문맥을 PCB에 백업하고, 새로운 프로세스를 실행하기 위해 문맥 PCB로 복구하여 새로운 프로세스를 실행합니다.

## 프로세스의 메모리 영역

프로세스 사용자 영역에는 **코드 영역**, **데이터 영역**, **힙 영역**, **스택 영역**이 있습니다.

**코드 영역**
실행할 수 있는 코드가 저장됩니다.

**데이터 영역**
데이터 영역은 프로그램이 실행되는 동안 유지할 데이터가 저장되는 공간입니다. 이런 데이터로는 **전역 변수** 있습니다. 

**힙 영역**
힙 영역은 프로그래머가 직접 할당할 수 있는 저장 공간입니다.
메모리 공간을 반환하지 않는다면 공간에 메모리가 남아 낭비를 만들 수 있습니다. 이것을 메모리 누수(`Memory leak`)이라고 합니다.

**스택 영역**
스택 영역은 데이터를 일시적으로 저장하는 공간입니다.
잠깐 사용하는 저장되는 공간이라서 매개 변수, 지역 변수가 대표적입니다.

# 10-2 프로세스 상태와 계층 구조

## 프로세스 상태
컴퓨터는 여러 프로세스들이 빠르게 번갈아 가면서 실행됩니다.

**생성 상태**
프로세스를 생성 중인 상태를 준비 상태라고 합니다.

**준비 상태**
준비 상태는 CPU를 할당받아 실행할 수 있지만, 차례가 아직 아니기 때문에 기다리고 있는 상태입니다.

**실행 상태**
실행 상태는 CPU를 할당받아 실행 중인 상태를 의미합니다.

**대기 상태**
입출력장치의 작업을 기다리는 상태를 대기 상태라고 합니다.

**종료 상태**
프로세스가 종료되면 운영체제는 PCB와 프로세스가 사용한 메모리를 정리합니다.

컴퓨터 내의 여러 프로세스는 생성, 준비, 대기, 종료 상태를 거치며 실행됩니다.

## 프로세스 계층 구조
프로세스는 실행 도중 시스템 호출을 통해 다른 프로세스를 생성 할 수 있습니다.

부모 프로세스로부터 생성된 자식 프로세스는 실행 과정에서 또 다른 자식 프로세스를 생성할 수 있고, 그 자식 프로세스는 실행 과정에서 또 다른 자식 프로세스를 생성할 수 있습니다.

## 프로세스 생성 기법
부모 프로세스를 통해 생성된 자식 프로세스들은 복제(`fork`)와 갈아입기(`exec`)를 통해서 실행됩니다.

fork와 exec는 시스템 호출입니다. 부모 프로세스는 fork 시스템 호출을 통해 자신의 복사본을 자식 프로세스로 생성합니다.

fork를 통해 복사본이 만들어진 뒤에 자식 프로세스는 exec 시스템 호출을 통해 새로운 프로그램으로 전환합니다.

정리하면 부모가 자식 프로세스를 실행하며 프로세스 계층 구조를 이루는 과정은 fork과 exec가 반복되는 과정이라 봅니다.
