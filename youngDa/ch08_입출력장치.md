# ch08 입출력장치
## 8-1 장치 컨트롤러와 장치 드라이버
### 장치 컨트롤러
입출력장치 다루기 어려운 이유
1. 종류가 많다
2. CPU, Memory 데이터 전송률(transfer rate)은 높지만, IO 데이터 전송률은 낮다

장치 컨트롤러의 역할
- 입출력장치가 다루기 어려운 이유로 인해 IO장비는 장치 컨트롤러를 거쳐 연결됨
- CPU와 입출력장치간의 통신 중개
- 오류 검출
- 데이터 버퍼링
    - 버퍼링 : 전송률이 높은 장치와 낮은 장치간 주고받는 데이터를 버퍼에 임시저장해서 전송률을 맞추는 방식


장치 컨트롤러 내부
- 데이터 레지스터 : CPU-IO 간 주고받을 데이터 담기는 레지스터. 버퍼. 주고받는 데이터 많은 경우 RAM을 쓰기도 함
- 상태 레지스터 : 입출력장치 상태 정보 저장
- 제어 레지스터 : 입출력장치 수행할 내용 제어정보, 명령 저장


### 장치 드라이버
- 장치 컨트롤러 동작을 감지하고 제어함으로서 장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게 하는 프로그램
- 입출력장치를 연결하기위한 소프트웨어적 통로

## 8-2 다양한 입출력 방법
### 프로그램 입출력
프로그램속 명령어로 입출력을 제어하는 방법.

CPU 입출력 작업 과정
1. CPU는 하드디스크 컨트롤러의 제어 레지스터에 쓰기 명령 전송
2. 하드디스크 컨트롤러는 하드디스크 상태 확인. 준비 되었으면 상태 레지스터에 준비되었다고 표시
3. CPU는 상태 레지스터를 주기적으로 읽어 하드디스크 상태 여부 확인. 준비 되었으면 메모리 정보를 데이터 레지스터에 작성.


명령어를 메모리에 저장하는 방식
- 메모리 맵 입출력(memory-mappedIO)
    - 메모리에 접근하기 위한 주소공간과 입출력장치에 접근하기 위한 주소공간을 하나의 주소공간으로 간주
- 고립형 입출력(isolated IO)
    - 메모리를 위한 주소공간과 입출력장치를 위한 주소공간을 분리

### 인터럽트 기반 입출력
CPU가 장치 컨트롤러에 입출력 작업을 명령하고 수행하는동안 CPU는 다른 작업을 진행하고, 입출력 작업이 완료되면 장치 컨트롤러가 CPU에게 인터럽트 신호를 보내는 방식.
- 동시에 여러 인터럽트가 요청도니 경우
    - 발생 순서대로 인터럽트 처리
    - PIC(프로그래머플 인터럽트 컨트롤러) : 우선순위대로 인터럽트 처리
    - NMI : 우선순위가 가장 높음(0순위 인터럽트)

### DMA 입출력
입출력장치와 메모리가 CPU를 거치지 않고 상호작용 하는 입출력 방식

DMA 입출력 과정
1. CPU가 DMA에 수행할 연산, 읽거나 쓸 메모리 주소 등 입출력 작업 명령
2. DMA 컨트롤러는 CPU 대신 장치 컨트롤러와 상호작용하며 입출력 작업 수행. 필요한 경우 메모리에 직접 접근해서 정보를 읽거나 씀
3. 입출력 작업 끝나면 CPU에 인터럽트 걸어 작업 끝났음을 알림

시스템 버스
- DMA컨트롤러는 시스템버스로 메모리에 직접 접근 가능하지만 , 시스템버스는 동시 사용 불가능

입출력버스
- DMA를 위해 시스템 버스를 너무 자주 사용하면 CPU가 그만큼 시스템 버스를 사용하지 못하는 문제가 발생함
- 위 문제를 막기 위해 입출력버스라는 별도의 버스에 연결해서 해결

# 내 생각
- 뭔가 앞선 내용들보다 상대적으로 중요하지 않다고 느껴졌던 것 같습니다.
- 실제로 적용할 내용은 거의 없어 보이지만, 알아두면 도움이 될것이라 믿습니다...
